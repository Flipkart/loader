<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Run Builder</title>
<script type="text/javascript" src="js/_lib/jquery.js"></script>
<script type="text/javascript" src="js/jquery.jstree.js"></script>
<script type="text/javascript" src="js/_lib/jquery.cookie.js"></script>
<script type="text/javascript" src="js/jquery.multi-select.js"></script>
<script type="text/javascript" src="js/jquery-ui.js"></script>
<script type="text/javascript" src="js/runBuilderNew.js"></script>
<link href="css/nav.css" rel="stylesheet" type="text/css" />
<link href="css/multi-select.css" rel="stylesheet" type="text/css" />
<link href="css/builder.css" rel="stylesheet" type="text/css" />
</head>

<body>
<div id="header">
</div>
<script>
  $(function(){
    $("#header").load('header.html');
  })
</script>
<div id="runBuilder">
<!-- <table width="100%" border="1">
  <tr>
    <td scope="col" style="width:35%; text-align:top">-->
      <div id="runTree"></div>
    <!--</td>
    <td scope="col" style="width:65%"> -->
      <div id="displayArea"></div>
    <!-- </td>
  </tr>
  <tr>
    <td colspan="2"> -->
    <!-- </td>
  </tr>
</table> -->
  <div id="success" align="center" style="background-color:#999;alignment-adjust:central;display:block;width=100px;height=100px">
  </div>
</div>
<div id="createButton" style="width:80%;align:center">
      <button id="create" style="float:right" onClick="updateRunSchema()">Save</button>
</div>
<script>
  $(function(){
    $.ajax({
      url: "/loader-server/functions",
      contentType: "application/json", 
      type:"GET",
      success: function(data) {
        window.availableFunctions = data;
      },
      error: function(e){
        console.log("Error");
      },
      complete: function(xhr, status){
        console.log(status);
      }
    });
    var runName = getQueryParams("runName");
    $.ajax({
      url: "/loader-server/runs/"+runName,
      contentType: "application/json", 
      type:"GET",
      async:false,
      success: function(data) {
        window.runSchema=data;
      },
      error: function(e){
        console.log("Error");
      },
      complete: function(xhr, status){
        console.log(status);
      }
    });
    createTree(window.runSchema);
    renderDisplayArea("run");
  });
</script>
</body>
</html>
